<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>接口文档-文档</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../dist/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="../dist/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../dist/css/AdminLTE.css">
    <link rel="stylesheet" href="../dist/css/common.css">
    <link rel="stylesheet" href="../dist/css/skins/_all-skins.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="../dist/js/html5shiv.js"></script>
  <script src="../dist/js/respond.min.js"></script>
  <![endif]-->
</head>

<body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">
        <header class="main-header">
            <!-- Logo -->
            <a href="index.html" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini">BL</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg">日志系统</span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">Toggle navigation</span>
                </a>
                <ul class="nav navbar-nav log-menu">
                    <li>
                        <a href="../index.html" target="_self">
                            <button class="btn btn-block btn-success btn-flat" id="nav_application">
                                <i class="fa fa-signal"></i>应用
                            </button>
                        </a>
                    </li>
                    <li>
                        <a href="../Mobile/mobile.html">
                            <button class="btn btn-block btn-flat btn-twitter" id="nav_mobile">
                                <i class="menu-icon glyphicon glyphicon-phone"></i>移动
                            </button>
                        </a>
                    </li>
                    <li>
                        <a href="../Browser/browser.html">
                            <button class="btn btn-block btn-flat btn-warning" id="nav_browser">
                                <i class="fa fa-users"></i>浏览器
                            </button>
                        </a>
                    </li>
                    <li>
                        <a href="../Servers/servers.html">
                            <button class="btn btn-block btn-flat bg-purple" id="nav_server">
                                <i class="fa fa-cogs"></i>服务器
                            </button>
                        </a>
                    </li>
                    <li>
                        <a href="../configs/configs.html">
                            <button class="btn btn-block btn-flat bg-navy" id="nav_config">
                                <i class="fa fa-fw fa-adjust"></i>配置
                            </button>
                        </a>
                    </li>
                    <li class="active">
                        <a href="documents.html">
                            <button class="btn btn-block btn-flat bg-aqua" id="nav_document">
                                <i class="fa fa-fw fa-database"></i>文档
                            </button>
                        </a>
                    </li>
                </ul>
                <div class="pull-right">
                    <a class="log-exit"><i class="fa fa-sign-out"></i></a>
                </div>
            </nav>
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="../dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                    </div>
                    <div class="pull-left info">
                        <p>亚历山大·皮尔斯</p>
                        <a href="#"><i class="fa fa-circle text-success"></i> 在线</a>
                    </div>
                </div>
                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu">
                    <li class="header">主导航</li>
                    <li class="treeview">
                        <a href="documents.html">
                            <i class="glyphicon glyphicon-home"></i> <span>项目首页</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="version-description.html">
                            <i class="glyphicon glyphicon-book"></i>
                            <span>版本说明</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="documents-deployment.html">
                            <i class="fa fa-cogs"></i>
                            <span>部署文档</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="documents-integrated.html">
                            <i class="fa fa-cutlery"></i>
                            <span>集成文档</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="application-monitoring.html">
                            <i class="fa fa-users"></i>
                            <span>应用监控</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="mobile-monitor.html">
                            <i class="glyphicon glyphicon-phone"></i>
                            <span>移动监控</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="browser-monitor.html">
                            <i class="fa fa-globe"></i>
                            <span>浏览器监控</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="server-monitor.html">
                            <i class="fa fa-desktop"></i>
                            <span>服务端监控</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="alarm-document.html">
                            <i class="fa fa-bell"></i>
                            <span>告警文档</span>
                        </a>
                    </li>
                    <li class="active treeview">
                        <a href="interface-document.html">
                            <i class="glyphicon glyphicon-align-left"></i>
                            <span>接口文档</span>
                        </a>
                    </li>
                    <li class="treeview">
                        <a href="developer-document.html">
                            <i class="glyphicon glyphicon-refresh"></i>
                            <span>开发者文档</span>
                        </a>
                    </li>
                    <li class="treeview">
                      <a href="common-problem.html">
                        <i class="fa fa-inbox"></i>
                        <span>常见问题</span>
                      </a>
                    </li>
                     <li class="treeview">
                      <a href="plug-in.html">
                        <i class="fa fa-key"></i>
                        <span>插件扩展</span>
                      </a>
                    </li>
                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>
        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
        接口文档
        <small>Interface Document</small>
      </h1>
            </section>
            <!-- Main content -->
            <section class="content">
                <div class="nav-tabs-custom">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#interfaceDocoument1" data-toggle="tab">用户侧监控</a></li>
                        <li><a href="#interfaceDocoument7" data-toggle="tab">心跳扩展接口</a></li>
                        <li><a href="#interfaceDocoument2" data-toggle="tab">线上变更</a></li>
                        <li><a href="#interfaceDocoument3" data-toggle="tab">邮件短信微信</a></li>
                        <li><a href="#interfaceDocoument4" data-toggle="tab">Metric-HTTP</a></li>
                        <li><a href="#interfaceDocoument6" data-toggle="tab">Zabbix告警</a></li>
                        <li><a href="#interfaceDocoument0" data-toggle="tab">报表接口</a></li>
                        <li><a href="#interfaceDocoument8" data-toggle="tab">项目接口</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane document" id="interfaceDocoument0">
                            <h4 class='text-danger'>在CAT的URL后面加上参数forceDownload=xml，可以看到当前页面的数据模型</h4>
                            <h4> Sample：<a href="http://cat.dianpingoa.com/cat/r/t?domain=&ip=&date=2014112110&reportType=&op=view&forceDownload=xml">传送门</a></h4>
                            <h4>PS：大部分核心界面都有接口。</h4></div>
                        <div class="tab-pane document active" id="interfaceDocoument1">
                            <h4 class="text-danger">用户端监控文档</h4>
                            <h5 class="text-info"> a).从用户端角度来看点评的业务接口状态，这是一个端到端的监控，能最早的发现用户端出现问题，比如根本访问不到点评，某城市延迟很大等。</h5>
                            <h5 class="text-info"> b).用户端的监控目前能监控Ajax接口，页面Page不能监控到。</h5>
                            <h5 class="text-info"> c).一般一个应用会监控1-2个重要接口，后端实时分析会按照城市、运营商维度做一些聚合分析。</h5>
                            </br>
                            <h4>外部监控API文档</h4>
                            <p>用途：提供外部监控的Http接口，用于监控用户端的错误信息。</p>
                            <p>1、为了保留以后的扩展性，移动端和Web端的暂定用不同的API接口。</p>
                            <p>2、公网IP，已经提交申请，后续我补充下。</p>
                            <p class="text-danger">3、【电信，暂使用此IP】CTC: 114.80.165.63，文档后面{ip}使用这个。</p>
                            <p>4、【网通，暂时不使用】CNC: 140.207.217.23</p>
                            </br>
                            <h4 class="text-danger">Web单次接口</h4>
                            <pre> http://{ip}/broker-service/api/single</pre>
                            <p>参数说明</p>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>query名</th>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>v</td>
                                    <td>version</td>
                                    <td>API版本号</td>
                                    <td>暂定为1</td>
                                </tr>
                                <tr>
                                    <td>ts</td>
                                    <td>timestamp</td>
                                    <td>发生时间</td>
                                    <td>long型，1970到现在的毫秒数</td>
                                </tr>
                                <tr>
                                    <td>tu</td>
                                    <td>targetUrl</td>
                                    <td>调用的URL或API</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>d</td>
                                    <td>duration</td>
                                    <td>访问耗时</td>
                                    <td>long 毫秒</td>
                                </tr>
                                <tr>
                                    <td>hs</td>
                                    <td>httpStatus</td>
                                    <td>httpStatus</td>
                                    <td>整型</td>
                                </tr>
                                <tr>
                                    <td>ec</td>
                                    <td>errorCode</td>
                                    <td>ErrorCode</td>
                                    <td>整型，如果没有的话，传空</td>
                                </tr>
                            </table>
                            自定义 HttpStatus 表
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>code名称</th>
                                    <th>code含义</th>
                                </tr>
                                <tr>
                                    <td>-100</td>
                                    <td>如果当前没有连接，不能连接到网络</td>
                                </tr>
                                <tr>
                                    <td>-107</td>
                                    <td>回传的数据格式出错</td>
                                </tr>
                                <tr>
                                    <td>-901</td>
                                    <td>当数据发送之后，500ms 之内没有收到 header</td>
                                </tr>
                                <tr>
                                    <td>-902</td>
                                    <td>当收到header 和 httpstatus 之后，500ms 之内没有开始下载</td>
                                </tr>
                                <tr>
                                    <td>-903</td>
                                    <td>当开始 loading 之后，500ms 之后仍然没有传送完毕</td>
                                </tr>
                                <tr>
                                    <td>-904</td>
                                    <td>实际上不会出现这个 code，因为 readyState 置 4 之后就成功了</td>
                                </tr>
                                <tr>
                                    <td>-905</td>
                                    <td>响应体的类型不符，比如 JSON.parse 失败</td>
                                </tr>
                                <tr>
                                    <td>-910</td>
                                    <td>业务超时，当业务代码中设置了 timeout 以后，触发了超时</td>
                                </tr>
                                <tr>
                                    <td>-911</td>
                                    <td>当业务代码中触发了 cancel 方法后，触发的 ajax 取消，有可能由业务逻辑所致，而不是错误。</td>
                                </tr>
                                <tr>
                                    <td>>0</td>
                                    <td>业务 code</td>
                                </tr>
                            </table>
                            </br>
                            <p>ec 参数</p>
                            <p>今后 ec 参数仅仅是用来标识 response json 中的 code 值</p>
                            </br>
                            <h4 class="text-danger">APP用户访问批量接口</h4>
                            <pre> http://{ip}/broker-service/api/batch</pre>
                            <p>批量接口POST内容，前面加上“<span class="text-danger">v=2&c=</span>”(v=1已遗弃)，不同请求之间用回车<span class="text-danger">ENTER</span>分隔，字段之间用<span class="text-danger">TAB</span>分隔。</p>
                            <table class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>timestamp</td>
                                    <td>发送数据时的时间戳</td>
                                    <td>long</td>
                                </tr>
                                <tr>
                                    <td>network</td>
                                    <td>2G,3G,4G,WIFI(iOS只有3G和WIFI)，1=wifi, 2=2G, 3=3G, 4=4G, 0=Unknown</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>version</td>
                                    <td>versionCode,比如6.8=680,只支持int类型</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>tunnel</td>
                                    <td>0 or 1，默认是0表示短连接，1表示是长连</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>command</td>
                                    <td>接口，一般为url path的最后一个单位(shop.bin)</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>code</td>
                                    <td>status code,建议区分http的返回码,比如>1000为业务错误码,
                                        <1000为网络错误码,<0为自定义错误码</td>
                                            <td>int</td>
                                </tr>
                                <tr>
                                    <td>platform</td>
                                    <td>android=1,ios=2,Unknown=0</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>requestbyte</td>
                                    <td>发送字节数</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>responsebyte</td>
                                    <td>返回字节数</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>responsetime</td>
                                    <td>用时 (毫秒）</td>
                                    <td>int</td>
                                </tr>
                            </table>
                            <pre>
  单个请求格式如下
  timstamp<span class="text-danger">TAB</span>network<span class="text-danger">TAB</span>version<span class="text-danger">TAB</span>tunnel<span class="text-danger">TAB</span>command<span class="text-danger">TAB</span>code<span class="text-danger">TAB</span>platform<span class="text-danger">TAB</span>requestbyte<span class="text-danger">TAB</span>responsebyte<span class="text-danger">TAB</span>responsetime<span class="text-danger">ENTER</span>
  
  </pre>
                            <p>POST内容如果有如下5个请求，Sample的POST内容为，</p>
                            <p class="text-danger">v=2&c=不需要做urlencode，后面的批量的content部分需要urlencode。</p>
                            <pre>
  v=2&c=
  1400037748152<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>1<span class="text-danger">\t</span>100<span class="text-danger">\t</span>100<span class="text-danger">\t</span>200<span class="text-danger">\n</span> 
  1400037748163<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>2<span class="text-danger">\t</span>120<span class="text-danger">\t</span>110<span class="text-danger">\t</span>300<span class="text-danger">\n</span> 
  1400037748174<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>3<span class="text-danger">\t</span>110<span class="text-danger">\t</span>120<span class="text-danger">\t</span>200<span class="text-danger">\n</span> 
  1400037748185<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>1<span class="text-danger">\t</span>120<span class="text-danger">\t</span>130<span class="text-danger">\t</span>100<span class="text-danger">\n</span> 
  1400037748196<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>500<span class="text-danger">\t</span>2<span class="text-danger">\t</span>110<span class="text-danger">\t</span>140<span class="text-danger">\t</span>200<span class="text-danger">\n</span>
  </pre>
                            </br>
                            <h4 class="text-danger">APP加载速度批量接口</h4>
                            <pre> http://{ip}/broker-service/api/speed</pre>
                            <p>批量接口POST内容，前面加上“<span class="text-danger">v=1&c=</span>”，不同请求之间用回车<span class="text-danger">ENTER</span>分隔，字段之间用<span class="text-danger">TAB</span>分隔。</p>
                            <table class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>timestamp</td>
                                    <td>发送数据时的时间戳</td>
                                    <td>long</td>
                                </tr>
                                <tr>
                                    <td>network</td>
                                    <td>2G,3G,4G,WIFI (iOS只有3G和WIFI)</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>version</td>
                                    <td>versionCode, eg. 6.8 = 680</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>platform</td>
                                    <td>android=1 or ios=2</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>page</td>
                                    <td>加载页面，eg. index.bin</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>step1-responseTime1</td>
                                    <td>页面加载第1阶段及延时，eg. 1-300</td>
                                    <td>String,responseTime单位为毫秒</td>
                                </tr>
                                <tr>
                                    <td>step2-responseTime2</td>
                                    <td>页面加载第2阶段及延时，eg. 1-300</td>
                                    <td>String,responseTime单位为毫秒</td>
                                </tr>
                                <tr>
                                    <td>.......</td>
                                    <td>页面加载阶段及延时，eg. 1-300</td>
                                    <td>String,responseTime单位为毫秒</td>
                                </tr>
                                <tr>
                                    <td>stepN-responseTimeN</td>
                                    <td>页面加载第N阶段及延时，eg. 1-300</td>
                                    <td>String,responseTime单位为毫秒</td>
                                </tr>
                            </table>
                            <pre>
  单个请求格式如下:
  timstamp<span class="text-danger">TAB</span>network<span class="text-danger">TAB</span>version<span class="text-danger">TAB</span>platform<span class="text-danger">TAB</span>page<span class="text-danger">TAB</span>step1-responseTime1<span class="text-danger">TAB</span>step2-responseTime2<span class="text-danger">TAB</span>step3-responseTime3<span class="text-danger">ENTER</span>
  
  </pre>
                            <p>POST内容如果有如下5个请求，Sample的POST内容为</p>
                            <pre>
  v=1&c=
  1400037748152<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>page1<span class="text-danger">\t</span>1-20<span class="text-danger">\t</span>2-30<span class="text-danger">\t</span>3-40<span class="text-danger">\t</span>4-50<span class="text-danger">\n</span> 
  1400037748163<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>page2<span class="text-danger">\t</span>1-20<span class="text-danger">\t</span>2-30<span class="text-danger">\t</span>3-40<span class="text-danger">\t</span>4-50<span class="text-danger">\n</span> 
  1400037748174<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>pgae3<span class="text-danger">\t</span>1-20<span class="text-danger">\t</span>2-30<span class="text-danger">\t</span>3-40<span class="text-danger">\t</span>4-50<span class="text-danger">\n</span> 
  1400037748185<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>page4<span class="text-danger">\t</span>1-20<span class="text-danger">\t</span>2-30<span class="text-danger">\t</span>3-40<span class="text-danger">\t</span>4-50<span class="text-danger">\n</span> 
  1400037748196<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>page5<span class="text-danger">\t</span>1-20<span class="text-danger">\t</span>2-30<span class="text-danger">\t</span>3-40<span class="text-danger">\t</span>4-50<span class="text-danger">\n</span>
  </pre>
                            </br>
                            <h4 class="text-danger">APP Crash日志接口</h4>
                            <pre> http://{ip}/broker-service/api/crash</pre>
                            <table class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>参数名</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>mt</td>
                                    <td>手机类型，andriod传入1，ios传入2</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>av</td>
                                    <td>APP的版本号，比如1.0.0</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>pv</td>
                                    <td>平台版本，比如7.0.1</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>m</td>
                                    <td>模块名，支持模块区分</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>msg</td>
                                    <td>crash的简单原因，后续统计根据msg进行分类，比如NullPointException</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>l</td>
                                    <td>错误等级，默认值可以传warning、error可以用来进行错误区分</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>d</td>
                                    <td>详细的错误日志</td>
                                    <td>String</td>
                                </tr>
                            </table>
                            <p class="text-danger">参数可以post上来，需要对value进行encode。</p>
                            <p class="text-danger">如下手机类型是ios，app版本号1.1，平台版本号1.2，模块是user，错误等级为error，错误原因为java.npe</p>
                            <pre>
    http://{ip}/broker-service/api/crash?mt=2&av=1.1&pv=1.2&m=user&msg=java.npe&l=error&d=dddddsfsdfsdfsdf  
  </pre>
                            </br>
                            <h4 class="text-danger">APP 长连访问批量接口</h4>
                            <pre> http://{ip}/broker-service/api/connection</pre>
                            <p>批量接口POST内容，前面加上“<span class="text-danger">v=3&c=</span>”，不同请求之间用回车<span class="text-danger">ENTER</span>分隔，字段之间用<span class="text-danger">TAB</span>分隔。</p>
                            <table class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>timestamp</td>
                                    <td>发送数据时的时间戳</td>
                                    <td>long</td>
                                </tr>
                                <tr>
                                    <td>network</td>
                                    <td>2G,3G,4G,WIFI(iOS只有3G和WIFI)，1=wifi, 2=2G, 3=3G, 4=4G, 0=Unknown</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>version</td>
                                    <td>versionCode,比如6.8=680,只支持int类型</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>tunnel</td>
                                    <td>固定为1，表示是长连</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>command</td>
                                    <td>接口，一般为url path的最后一个单位(shop.bin)</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>code</td>
                                    <td>status code,建议区分http的返回码,比如>1000为业务错误码,
                                        <1000为网络错误码,<0为自定义错误码</td>
                                            <td>int</td>
                                </tr>
                                <tr>
                                    <td>platform</td>
                                    <td>android=1,ios=2,Unknown=0</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>requestbyte</td>
                                    <td>发送字节数</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>responsebyte</td>
                                    <td>返回字节数</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>responsetime</td>
                                    <td>用时 (毫秒）</td>
                                    <td>int</td>
                                </tr>
                            </table>
                            <pre>
  单个请求格式如下
  timstamp<span class="text-danger">TAB</span>network<span class="text-danger">TAB</span>version<span class="text-danger">TAB</span>tunnel<span class="text-danger">TAB</span>command<span class="text-danger">TAB</span>code<span class="text-danger">TAB</span>platform<span class="text-danger">TAB</span>requestbyte<span class="text-danger">TAB</span>responsebyte<span class="text-danger">TAB</span>responsetime<span class="text-danger">ENTER</span>
  
  新版本加入了接入点IP
  </pre>
                            <p>POST内容如果有如下5个请求，Sample的POST内容为，</p>
                            <p class="text-danger">v=2&c=不需要做urlencode，后面的批量的content部分需要urlencode。</p>
                            <pre>
  v=3&c=
  1400037748152<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>1<span class="text-danger">\t</span>100<span class="text-danger">\t</span>100<span class="text-danger">\t</span>200<span class="text-danger">\n</span> 
  1400037748163<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>2<span class="text-danger">\t</span>120<span class="text-danger">\t</span>110<span class="text-danger">\t</span>300<span class="text-danger">\n</span> 
  1400037748174<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>3<span class="text-danger">\t</span>110<span class="text-danger">\t</span>120<span class="text-danger">\t</span>200<span class="text-danger">\n</span> 
  1400037748185<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>200<span class="text-danger">\t</span>1<span class="text-danger">\t</span>120<span class="text-danger">\t</span>130<span class="text-danger">\t</span>100<span class="text-danger">\n</span> 
  1400037748196<span class="text-danger">\t</span>1<span class="text-danger">\t</span>680<span class="text-danger">\t</span>1<span class="text-danger">\t</span>shop.bin<span class="text-danger">\t</span>500<span class="text-danger">\t</span>2<span class="text-danger">\t</span>110<span class="text-danger">\t</span>140<span class="text-danger">\t</span>200<span class="text-danger">\n</span>
  </pre>
                            </br>
                            <h4 class="text-danger">JS 错误接口</h4>
                            <pre> http://{ip}/broker-service/api/js</pre>
                            <p>参数说明</p>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>query名</th>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>v</td>
                                    <td>version</td>
                                    <td>API版本号</td>
                                    <td>暂定为1</td>
                                </tr>
                                <tr>
                                    <td>timestamp</td>
                                    <td>timestamp</td>
                                    <td>发生时间</td>
                                    <td>long型，1970到现在的毫秒数</td>
                                </tr>
                                <tr>
                                    <td>error</td>
                                    <td>error</td>
                                    <td>错误的类型</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>file</td>
                                    <td>file</td>
                                    <td>错误的发生的js文件</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>url</td>
                                    <td>url</td>
                                    <td>错误的发生的html页面</td>
                                    <td>String</td>
                                </tr>
                                <tr>
                                    <td>line</td>
                                    <td>line</td>
                                    <td>错误的行数</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>data</td>
                                    <td>data</td>
                                    <td>data类型</td>
                                    <td>String，如果没有的话，传空串</td>
                                </tr>
                            </table>
                            </br>
                            <h4 class="text-danger">CDN监控接口</h4>
                            <pre> http://{ip}/broker-service/api/cdn</pre> 批量接口POST内容，前面加上v=1&c=，不同请求之间用回车
                            <span class="text-danger">ENTER</span>分隔，字段之间用<span class="text-danger">TAB</span>分隔。
                            <pre>
  timstamp<span class="text-danger">TAB</span>targetUrl<span class="text-danger">TAB</span>dnslookup<span class="text-danger">TAB</span>tcpconnect<span class="text-danger">TAB</span>request<span class="text-danger">TAB</span>response<span class="text-danger">ENTER</span>
  
  sample如下:
  
  v=1&c=
  1400037748182<span class="text-danger">TAB</span>cdn-resource1<span class="text-danger">TAB</span>300<span class="text-danger">TAB</span>200<span class="text-danger">TAB</span>300<span class="text-danger">TAB</span>300<span class="text-danger">ENTER</span>
  1400037748182<span class="text-danger">TAB</span>cdn-resource2<span class="text-danger">TAB</span>300<span class="text-danger">TAB</span>200<span class="text-danger">TAB</span>300<span class="text-danger">TAB</span>300<span class="text-danger">ENTER</span>
  1400037748182<span class="text-danger">TAB</span>cdn-resource3<span class="text-danger">TAB</span>300<span class="text-danger">TAB</span>200<span class="text-danger">TAB</span>300<span class="text-danger">TAB</span>300<span class="text-danger">ENTER</span>
  </pre>
                            <p>参数说明</p>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>v</td>
                                    <td>API版本号</td>
                                    <td>暂定为1</td>
                                </tr>
                                <tr>
                                    <td>c</td>
                                    <td>具体内容</td>
                                    <td>content内容</td>
                                </tr>
                            </table>
                            <p>content内容说明</p>
                            <pre>
  timstamp<span class="text-danger">TAB</span>targetUrl<span class="text-danger">TAB</span>dnslookup<span class="text-danger">TAB</span>tcpconnect<span class="text-danger">TAB</span>request<span class="text-danger">TAB</span>response<span class="text-danger">ENTER</span>
  </pre>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>实际名称</th>
                                    <th>描述</th>
                                    <th>类型</th>
                                </tr>
                                <tr>
                                    <td>timestamp</td>
                                    <td>发生时间</td>
                                    <td>long型，1970到现在的毫秒数</td>
                                </tr>
                                <tr>
                                    <td>targetUrl</td>
                                    <td>具体的cdn资源</td>
                                    <td>cdn资源的一个定义</td>
                                </tr>
                                <tr>
                                    <td>dnslookup</td>
                                    <td>dns寻址时间</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>tcpConnect</td>
                                    <td>tcp连接建立</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>request</td>
                                    <td>请求时间</td>
                                    <td>int</td>
                                </tr>
                                <tr>
                                    <td>response</td>
                                    <td>接受时间</td>
                                    <td>int</td>
                                </tr>
                            </table>
                            <br/>
                            <h4 class="text-success">URL规则配置&nbsp;  <a target="_blank" href="/cat/s/config?op=urlPatternUpdate">链接</a></h4>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th>ID</th>
                                    <th>描述</th>
                                </tr>
                                <tr>
                                    <td>唯一ID</td>
                                    <td>不能有特殊字符，仅限于英文字母和-</td>
                                </tr>
                                <tr>
                                    <td>所属组</td>
                                    <td>分析时不起作用，仅仅用作url的分组，用于展示目的</td>
                                </tr>
                                <tr>
                                    <td>Pattern名</td>
                                    <td>支持完全匹配方式，比如http://m.api.dianping.com/searchshop.api， 部分匹配，比如 http://www.dianping.com/{City}/food，{City}可以匹配任何字符串</td>
                                </tr>
                            </table>
                            <br/>
                            <h4 class="text-danger">APP监控报表获取&nbsp;&nbsp;&nbsp;&nbsp; </h4>
                            <p>Cat支持其它系统通过调用HTTP API来获取APP监控报表数据（JSON格式）</p>
                            <pre>
  http请求方式: GET或者POST
  http://主机域名:端口/cat/r/app?
</pre>
                            <p>参数说明</p>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th width="70%">说明</th>
                                </tr>
                                <tr>
                                    <td>op</td>
                                    <td>linechartJson[查看API访问趋势、运营活动趋势]、piechartJson[查看访问量分布]<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>其他参数</td>
                                    <td>参考端到端APP监控文档，除了op参数不同，其他均相同，可直接复用<span class="text-danger">  必需</span></td>
                                </tr>
                            </table>
                            <p> url示例<span class="text-danger">（红色部分为不同参数，没有op则需要添加，其他参数相同）</span></p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/app?<span class="text-danger">op=view</span>&query1=2014-10-28;1;;;;;;;;;&query2=&type=request&groupByField=&sort=&domains=default&commandId=1&domains2=default&commandId2=1 为APP监控查看的URL链接
  则获取报表的URL为：
  http://cat.dianpingoa.com/cat/r/app?<span class="text-danger">op=linechartJson&</span>query1=2014-10-28;1;;;;;;;;;&query2=&type=request&groupByField=&sort=&domains=default&commandId=1&domains2=default&commandId2=1</pre>
                            <br>
                            <h4 class="text-danger">WEB监控报表获取&nbsp;&nbsp;&nbsp;&nbsp; </h4>
                            <p>Cat支持其它系统通过调用HTTP API来获取WEB监控报表数据（JSON格式）</p>
                            <pre>
  http请求方式: GET或者POST
  http://主机域名:端口/cat/r/web?
</pre>
                            <p>参数说明</p>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th width="70%">说明</th>
                                </tr>
                                <tr>
                                    <td>op</td>
                                    <td>json<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>其他参数</td>
                                    <td>参考端到端WEB监控文档，除了op参数不同，其他均相同，可直接复用<span class="text-danger">  必需</span></td>
                                </tr>
                            </table>
                            <p> url示例<span class="text-danger">（红色部分为不同参数，没有op则需要添加，其他参数相同）</span></p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/web?<span class="text-danger">op=view&</span>url=s1-small-dnsLookup&group=cdn-s1&city=上海市-&type=info&channel=&startDate=2014-10-28%2016:00&endDate=2014-10-28%2019:00 为APP监控查看的URL链接
  则获取报表的URL为：
  http://cat.dianpingoa.com/cat/r/web?<span class="text-danger">op=json&</span>url=s1-small-dnsLookup&group=cdn-s1&city=上海市-&type=info&channel=&startDate=2014-10-28%2016:00&endDate=2014-10-28%2019:00
</pre>
                        </div>
                        <div class="tab-pane document active" id="interfaceDocoument7">
                            <h4>Heartbeat的扩展接口</h4>
                            <p>监控单台机器内的一些数据指标，cat按照一分钟的粒度进行上报，服务端统一做展示。</p>
                            <h5 class="text-success">适用场景</h5>
                            <p>1,监控当前一个业务线程状态</p>
                            <p>2,监控jvm内部一个队列长度</p>
                            <p>3,监控jvm当前数据库连接数等</p>
                            <p>4,监控业务内部一个技术指标等</p>
                            <h5>例子</h5>
                            <xmp>
package com.dianping.cat.status;

import java.util.HashMap;
import java.util.Map;

import org.codehaus.plexus.personality.plexus.lifecycle.phase.Initializable;
import org.codehaus.plexus.personality.plexus.lifecycle.phase.InitializationException;

public class HeartbeatExtenstion implements StatusExtension, Initializable {

  //给当前的类定义一个ID
  @Override
  public String getId() {
    return "MyTestId";
  }

  //一个简单描述
  @Override
  public String getDescription() {
    return "MyDescription";
  }

  //注意，只有valude值可以被转化double类型的才会在heartbeat做图形展示
  @Override
  public Map<String, String> getProperties() {
    Map<String, String> maps = new HashMap<String, String>();

    maps.put("key1", String.valueOf(1));
    maps.put("key2", String.valueOf(2));
    maps.put("key3", String.valueOf(3));

    return maps;
  }

  //这里是实现了初始化方法，把这个实现注册到cat上，如果你使用spring，需要在spring里面注册此bean，并实现初始化方法。
  @Override
  public void initialize() throws InitializationException {
    StatusExtensionRegister.getInstance().register(this);
  }
}

</xmp>
                            <h5 class="text-success">结果展示</h5> cat服务端会将一个extension id作为一个group，然后将每个key指标都会做图形处理，结果会在cat的heartbeat中进行展示如下
                            <img src="../images/heartbeat02.png" width="100%" />
                        </div>
                        <div class="tab-pane document" id="interfaceDocoument2">
                            <h4 class="text-danger">变更监控文档</h4>
                            <h4 class="text-info">记录及展示变更内容</h4>
                            <h4 class="text-success">HTTP API调用方式</h4>
                            <p>接口调用请求说明(插入数据)</p>
                            <pre>
  http请求方式: GET或者POST
  http://主机域名:端口/cat/r/alteration?
</pre>
                            <p>参数说明</p>
                            <table style="width:50%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th width="70%">说明</th>
                                </tr>
                                <tr>
                                    <td>op</td>
                                    <td>执行操作<span class="text-danger">  必需[唯一值：insert]</span></td>
                                </tr>
                                <tr>
                                    <td>type</td>
                                    <td>变更类型<span class="text-danger">  必需[可能值：puppet, workflow, lazyman]</span></td>
                                </tr>
                                <tr>
                                    <td>title</td>
                                    <td>变更标题<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>domain</td>
                                    <td>变更项目<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>hostname</td>
                                    <td>变更机器域名<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>alterationDate</td>
                                    <td>变更时间<span class="text-danger">  必需[格式如：2014-03-30 00:00:00]</span></td>
                                </tr>
                                <tr>
                                    <td>user</td>
                                    <td>发起变更用户<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>content</td>
                                    <td>变更内容<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>group</td>
                                    <td>变更组别<span class="text-success">  可选</span></td>
                                </tr>
                                <tr>
                                    <td>ip</td>
                                    <td>变更机器ip<span class="text-success">  可选</span></td>
                                </tr>
                                <tr>
                                    <td>url</td>
                                    <td>变更连接<span class="text-success">  可选</span></td>
                                </tr>
                            </table>
                            <p> url示例（get方式）</p>
                            <pre>
  http://主机域名:端口/cat/r/alteration?op=insert&type=puppet&title=2&domain=3&hostname=1&alterationDate=2013-02-19%2000:00:00&user=5&content=6&group=&ip=&url=
</pre>
                            <p>返回说明</p>
                            <pre>
  <span class="text-success">{"status":200} ——> 成功</span>
  <span class="text-danger">{"status":500, "errorMessage":"lack args"} ——> 失败 [必需参数不全]</span>
  <span class="text-danger">{"status":500} ——> 失败 [其它错误]</span>
</pre>
                            </br>
                        </div>
                        <div class="tab-pane document" id="interfaceDocoument3">
                            <h4 class="text-danger">告警Http API</h4>
                            <p>Cat支持其它系统通过调用HTTP API来发送信息。目前支持三种发送渠道：邮件、短信、微信（需要邮箱和“爱点评”微信订阅号绑定）</p>
                            <pre>
  http请求方式: GET或者POST
  http://主机域名:端口/cat/r/alert?
</pre>
                            <p>参数说明</p>
                            <table style="width:50%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th width="70%">说明</th>
                                </tr>
                                <tr>
                                    <td>op</td>
                                    <td>执行操作<span class="text-danger">  必需[唯一值：alert]</span></td>
                                </tr>
                                <tr>
                                    <td>channel</td>
                                    <td>渠道类型<span class="text-danger">  必需[可能值：mail, sms, weixin]</span></td>
                                </tr>
                                <tr>
                                    <td>title</td>
                                    <td>告警标题<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>content</td>
                                    <td>告警内容<span class="text-danger">  短信可选，邮件、微信必需</span></td>
                                </tr>
                                <tr>
                                    <td>group</td>
                                    <td>告警组名<span class="text-danger">  微信必需，短信、邮件可选</span></td>
                                </tr>
                                <tr>
                                    <td>type</td>
                                    <td>告警类型<span class="text-danger">  必需[可能值：network, business, exception, system, thirdParty, frontEndException]</span></td>
                                </tr>
                                <tr>
                                    <td>receivers</td>
                                    <td>接收人<span class="text-danger">  必需[邮箱地址或者手机号；如有多个接收人，用半角逗号分割]</span></td>
                                </tr>
                            </table>
                            <p> url示例（get方式）</p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/alert?op=alert&channel=mail&title=test&content=testcontent&group=cat&type=test&receivers=leon.li@dianping.com
</pre>
                            <p>返回说明</p>
                            <pre>
  <span class="text-success">{"status":200} ——> 成功</span>
  <span class="text-danger">{"status":500, "errorMessage":"lack receivers"} ——> 失败 [接收人receivers未填写或者格式错误]</span>
  <span class="text-danger">{"status":500, "errorMessage":"send failed, please check your channel argument"} ——> 失败 [渠道channel错误，请指定mail,sms,weixin三者中的一种渠道]</span>
  <span class="text-danger">{"status":500, "errorMessage":"send failed, please retry again"} ——> 失败 [发送异常]</span>
</pre>
                            </br>
                        </div>
                        <div class="tab-pane document" id="interfaceDocoument4">
                            <h4>HTTP API调用方式</h4>
                            <br>
                            <h5 class="text-success"><strong>CAT接口调用请求说明</strong></h5>
                            <pre>
  http请求方式: GET（请使用http协议）
  http://cat.dianpingoa.com/cat/r/monitor?
</pre>
                            <p>参数说明</p>
                            <table style="width:90%" class="table table-bordered table-striped table-condensed">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th>说明</th>
                                </tr>
                                <tr>
                                    <td>group</td>
                                    <td>监控组唯一ID名称，<span class="text-danger">必需，仅仅包括字母、数字，不能包含特殊字符，比如引号，冒号等。建议TuanGou这类命名方式</span></td>
                                </tr>
                                <tr>
                                    <td>domain</td>
                                    <td>应用唯一ID名称，<span class="text-danger">必需，仅仅包括字母、数字，不能包含特殊字符，比如引号，冒号等。建议用TuanGouWeb这类命名方式</span></td>
                                </tr>
                                <tr>
                                    <td>key</td>
                                    <td>监控业务唯一ID名称，<span class="text-danger">必需，仅仅包括字母、数字，不能包含特殊字符，比如引号，冒号等。建议用PayCount这类命名方式</span></td>
                                </tr>
                                <tr>
                                    <td>timestamp</td>
                                    <td>时间戳,<span class="text-danger">必需，仅仅为数字。如果缺失，选取服务器当前时间</span></td>
                                </tr>
                                <tr>
                                    <td>op</td>
                                    <td>sum，avg，count[<span class="text-danger">默认</span>]</td>
                                </tr>
                                <tr>
                                    <td>count</td>
                                    <td>op=count时所需，<span class="text-danger">默认为1</span></td>
                                </tr>
                                <tr>
                                    <td>sum</td>
                                    <td>op=sum时所需，<span class="text-danger">默认为0</span></td>
                                </tr>
                                <tr>
                                    <td>avg</td>
                                    <td>op=avg时所需，<span class="text-danger">默认为0</span></td>
                                </tr>
                            </table>
                            <p> 1).op = count时，用于记录一个指标值出现的次数</p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/monitor?timestamp=1404815988&group=myGroup&domain=myApp&key=myKey&op=count
</pre>
                            <p> 2).op = avg时，用于记录一个指标出现的平均值</p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/monitor?timestamp=1404815988&group=myGroup&domain=myApp&key=myKey&op=avg&avg=500
</pre>
                            <p> 3).op = sum时，用于记录一个指标出现的总和</p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/monitor?timestamp=1404815988&group=myGroup&domain=myApp&key=myKey&op=sum&sum=500
</pre>
                            <p> 4).op = batch时，用于批量提交指标。（TAB、ENTER分别是制表符和换行符）</p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/monitor?op=batch&batch=group<span class="text-danger">TAB</span>domain<span class="text-danger">TAB</span>key<span class="text-danger">TAB</span>type<span class="text-danger">TAB</span>time<span class="text-danger">TAB</span>value<span class="text-danger">ENTER</span>
  group<span class="text-danger">TAB</span>domain<span class="text-danger">TAB</span>key<span class="text-danger">TAB</span>type<span class="text-danger">TAB</span>time<span class="text-danger">TAB</span>value<span class="text-danger">ENTER</span>
</pre>
                            <p>返回说明</p>
                            <pre>
  <span class="text-danger">{"statusCode":"-1","errorMsg":"Unknown [ domain,group,key ] name!"} ——> 失败 [必需参数缺失]</span>
  <span class="text-success">{"statusCode":"0"} ——> 成功</span>
</pre>
                            <br>
                        </div>
                        <div class="tab-pane document" id="interfaceDocoument6">
                            <h4 class="text-danger">告警API&nbsp;&nbsp;&nbsp;&nbsp; </h4>
                            <p>Cat支持其它系统通过调用HTTP API来添加告警信息</p>
                            <pre>
  http请求方式: GET或者POST
  http://主机域名:端口/cat/r/alert?
</pre>
                            <p>参数说明</p>
                            <table style="width:70%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th width="70%">说明</th>
                                </tr>
                                <tr>
                                    <td>op</td>
                                    <td>执行操作<span class="text-danger">  必需[只能为insert]</span></td>
                                </tr>
                                <tr>
                                    <td>domain</td>
                                    <td>告警项目名<span class="text-danger">  必需</span></td>
                                </tr>
                                <tr>
                                    <td>level</td>
                                    <td>告警级别<span class="text-danger">  可选，默认为warning</span></td>
                                </tr>
                                <tr>
                                    <td>category</td>
                                    <td>告警类型<span class="text-danger">  可选，默认为zabbix</span></td>
                                </tr>
                                <tr>
                                    <td>alertTime</td>
                                    <td>告警时间<span class="text-danger">  可选，格式为yyyy-MM-dd HH:mm:ss(get方式需要转码),默认为插入时间</span></td>
                                </tr>
                                <tr>
                                    <td>metric</td>
                                    <td>告警指标<span class="text-danger">  可选</span></td>
                                </tr>
                                <tr>
                                    <td>content</td>
                                    <td>告警内容<span class="text-danger">  可选</span></td>
                                </tr>
                            </table>
                            <p> url示例（get方式）</p>
                            <pre>
  http://cat.dianpingoa.com/cat/r/alert?op=insert&domain=testDomain&level=warning&category=zabbix&metric=testMetric&content=testContent&alertTime=2014-01-01%2000:00:00
</pre>
                            <p>返回说明</p>
                            <pre>
  <span class="text-success">{"status":200} ——> 成功</span>
  <span class="text-danger">{"status":500} ——> 失败</span>
  <span class="text-danger">{"status":500, "errorMessage":"lack domain"} ——> 失败 [缺少domain参数]</span>
</pre></div>
                        <div class="tab-pane document" id="interfaceDocoument8">
                            <h4 class="text-success">1. 项目配置</h4>
                            <p>接口调用请求说明</p>
                            <pre>
  http请求方式: GET或POST（请使用http协议）
  http://cat.dianpingoa.com/cat/s/project?op=projectUpdate
</pre>
                            <p>参数说明</p>
                            <table style="width:100%" class="table table-bordered table-striped table-condensed  ">
                                <tr>
                                    <th width="30%">参数</th>
                                    <th>说明</th>
                                </tr>
                                <tr>
                                    <td>project.domain</td>
                                    <td>CAT上的项目名，<span class="text-danger">必需</span></td>
                                </tr>
                                <tr>
                                    <td>project.cmdbDomain</td>
                                    <td>cmdb中统一项目名，<span class="text-danger">必需</span></td>
                                </tr>
                                <tr>
                                    <td>project.level</td>
                                    <td>cmdb中项目统一级别，<span class="text-danger">必需，数字</span></td>
                                </tr>
                                <tr>
                                    <td>project.bu</td>
                                    <td>cmdb中项目所属事业部名称，<span class="text-danger">必需</span></td>
                                </tr>
                                <tr>
                                    <td>project.cmdbProductline</td>
                                    <td>cmdb中项目所属产品线名称，<span class="text-danger">必须</span></td>
                                </tr>
                                <tr>
                                    <td>project.owner</td>
                                    <td>项目负责人，<span class="text-danger">必需</span></td>
                                </tr>
                                <tr>
                                    <td>project.email</td>
                                    <td>多个英文逗号分割，<span class="text-danger">必需</span></td>
                                </tr>
                                <tr>
                                    <td>project.phone</td>
                                    <td>多个英文逗号分割，<span class="text-danger">必需</span></td>
                                </tr>
                            </table>
                            <p> 示例：
                                <pre>
  http://cat.dianpingoa.com/cat/s/project?op=projectUpdate&project.domain=cat&project.cmdbDomain=cat&project.level=1&project.bu=平台技术中心&project.cmdbProductline=平台架构&project.owner=尤勇&project.email=yong.you@dianping.com,jialin.sun@dianping.com&project.phone=18616671676,15201789489
</pre>
                                <p>返回说明</p>
                                <pre>
  <span class="text-danger">{"status":500, "info":"internal error"} ——> 失败</span>
  <span class="text-success">{"status":200, "info":"success"}        ——> 成功</span>
</pre>
                                <h4 class="text-success">2. 获取项目名</h4>
                                <p>接口调用请求说明</p>
                                <pre>
  http请求方式: GET（请使用http协议）
  http://cat.dianpingoa.com/cat/s/project?op=domains
</pre>
                                <p>返回Json数据</p>
                                <pre>
  {
    domains: [
      "account-all-service",
      "receipt-verify-service",
      "tuangou-mapi-web",
      "pet-server",
      "cortex-search-web",
    ]
  }
</pre>
                        </div>
                    </div>
                </div>
        </div>
        </section>
    </div>
    </div>
    <!-- ./wrapper -->
    <script src="../plugins/jQuery/jQuery-2.2.0.min.js"></script>
    <!-- Bootstrap 3.3.6 -->
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../dist/js/app.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../dist/js/demo.js"></script>
</body>

</html>
